<!-- source/docker-top/DockerStats.page -->
Icon="docker-top.png"
Title="Docker Top"
Menu="Dashboard:0"
---
<?php
$plugin = "docker-top";
$pluginname = "Docker Top";

$mytiles[$pluginname]['column2'] =
<<<EOT
<tbody id="tblDockerTop" title="Docker Top">
    <tr>
        <td>
            <span class="tile-header">
                <span class="tile-header-left">
                    <i class="fa fa-th-large f32"></i>
                    <div class="section">
                        <h3 class="tile-header-main">DOCKER TOP</h3>
                        <span id="docker-top-subtitle">Top 10 Containers</span>
                    </div>
                </span>
                <span class="tile-header-right">
                    <span class="tile-header-right-controls">
                        <i class="fa fa-refresh control" onclick="updateDockerTop()" title="Refresh" style="cursor: pointer; font-size: 14px;"></i>
                        <a href="/Settings/DockerTopSettings" title="Settings"><i class="fa fa-fw fa-cog control"></i></a>
                    </span>
                </span>
            </span>
        </td>
    </tr>
    <tr>
        <td>
            <div id="docker-top-list" class="docker-top-list">
                <div class="docker-top-loading">Loading stats...</div>
            </div>
            <div id="docker-top-details" class="docker-top-details-toggle" onclick="toggleDetails()" style="text-align: center; padding: 8px; cursor: pointer; font-size: 1.1rem; opacity: 0.6;">
                Hide details
            </div>
        </td>
    </tr>
</tbody>
EOT;
?>

<link rel="stylesheet" href="/plugins/<?php echo $plugin; ?>/styles.css">
<script src="/plugins/<?php echo $plugin; ?>/stats.js"></script>

<script>
// Toggle details visibility
function toggleDetails() {
    const list = document.getElementById('docker-top-list');
    const toggle = document.getElementById('docker-top-details');
    if (list.style.display === 'none') {
        list.style.display = 'block';
        toggle.innerText = 'Hide details';
    } else {
        list.style.display = 'none';
        toggle.innerText = 'Show details';
    }
}

// Init
$(document).ready(function() {
    setInterval(updateDockerTop, 3000);
    updateDockerTop();
});
</script>
